â–¶PLSQL Procedural Language ì ˆì°¨ ì§€í–¥ì  ì–¸ì–´
â–¶set serveroutput on; --ì°½ í‚¬ë•Œë§ˆë‹¤ í•œë²ˆì”© ì¨ ì¤˜ì•¼ í•¨ --ì¶œë ¥í•  ì¤€ë¹„

â–¶declare/begin/end
1)
declare
	x number; --ë³€ìˆ˜ ì„ ì–¸
begin
	x := 100;			--A:=B Aì— Bë¥¼ ë„£ìŒ
	dbms_output.put_line('ê°’=' || x);	--lineì€ ì¶œë ¥ê³¼ ì—”í„°ì˜ ì˜ë¯¸
	dbms_output.put('ê°’=' || x);		--ì¶œë ¥ ì•ˆë¨
end;
/	-sqlë””ë²¨ë¡œí¼ì—ì„œëŠ” /ì•ˆì¨ë„ ë¨

2)
declare
	x number;
	y number;
	z number;
	name varchar2(10);
	addr varchar2(10);
begin
	x:=10;
	y:=20;
	z:=x+y;
	name:='ê¹€ì—°ì•„';
	addr:='ì„œìš¸';
	dbms_output.put('ê²°ê³¼ëŠ” ' || (x+y) || ' ì…ë‹ˆë‹¤.'); --()ë¬¶ì–´ ì¤˜ì•¼ í•¨
	dbms_output.put('ê²°ê³¼ëŠ” ' || z || ' ì…ë‹ˆë‹¤.' || chr(10) ); --ì—”í„°: ì—°ê²°í•´ë¼ 10 ì—”í„°ì˜ ì•„ìŠ¤í‚¤ì½”ë“œê°’
	dbms_output.put('ëª«:' || floor(12/7) || ' ì…ë‹ˆë‹¤.');
	dbms_output.put('ëª«:' || round(12/7) || ' ì…ë‹ˆë‹¤.');
	dbms_output.put('ë‚˜ë¨¸ì§€:' || mod(12,7) || ' ì…ë‹ˆë‹¤.');
	dbms_output.put_line('ì´ë¦„: ' || name || ' ì£¼ì†Œ: ' || addr); --lineì€ ì¶œë ¥ê³¼ ì—”í„°ì˜ ì˜ë¯¸
end;
/

â–·select into : ê²°ê³¼ê°€ ë ˆì½”ë“œ í•œì¤„ë§Œ ë‚˜ì˜¬ ë•Œ ì‚¬ìš© ê°€ëŠ¥***
declare
	vname varchar2(12); --ê°€ì ¸ì˜¬ í…Œì´ë¸”ì˜ ë°ì´í„°ì˜ ê¸°ì¡´ ì»¬ëŸ¼íƒ€ì…ê³¼ ë˜‘ê°™ì•„ì•¼ í•¨ (í¬ê¸°ëŠ” ì•ˆë˜‘ê°™ì•„ë„ ë¨)
	vposition varchar2(10);
	vsalary number;
begin
	select name, position, salary
	into vname, vposition, vsalary --ê¸°ì¡´ ì»¬ëŸ¼ì„ ë‹´ì„ ë³€ìˆ˜ê°€ í•„ìš”í•¨
	from company
	where sabun = 3; --ê²°ê³¼ ì˜¤ì§ í•œì¤„ì˜ ë ˆì½”ë“œë¥¼ ìœ„í•œ ì¡°ê±´

	dbms_output.put_line(vname || ',' || vposition || ',' || vsalary);
end;
/

declare
	vsalary number;
	vavg number;
begin
	select max(salary),avg(salary) --í•œì¤„
	into vsalary,vavg
	from company;

	dbms_output.put_line('ìµœê³ ê¸‰ì—¬:' || vsalary);
	dbms_output.put_line('í‰ê· :' || vavg);
end;
/

membersì˜ ë¶€ì„œë³„ ê¸‰ì—¬ í‰ê·  êµ¬í•˜ê¸°

select depart, avg(salary)
from members
group by depart;

DEPART               AVG(SALARY) --ê²°ê³¼ ì„¸ì¤„ ë‚˜ì˜´ -> plsql ëª» ì”€
-------------------- -----------
ì˜ì—…ë¶€                514.285714
ê°œë°œë¶€                       500
í™ë³´ë¶€                    500100

membersì˜ ë¶€ì„œë³„ ê¸‰ì—¬ í‰ê· ì´ 2000ì´ìƒì¸ ë ˆì½”ë“œ êµ¬í•˜ê¸°

select depart, avg(salary)
from members
group by depart
having avg(salary) >= 2000; --ì¡°ê±´ìœ¼ë¡œ ë ˆì½”ë“œ í•œì¤„ë§Œ ì¶œë ¥í•œë‹¤ë©´ ê°€ëŠ¥í•¨ --havingí•¨ìˆ˜ê°€ ë“¤ì–´ê°ˆë•Œ


declare
	vdepart varchar2(20);
	vavg number; 
begin
	select depart, avg(salary)
	into vdepart, vavg
	from members
	group by depart
	having avg(salary) >= 2000;

	dbms_output.put_line(vdepart || ',' || vavg); --(vdepart , vavg); X
end;
/
---------------------------------------------------------------------------------------------
â–¶insert

 NO NAME      ADDR
--- --------- ------
  1 ì°¬ì„±      ëŒ€êµ¬
  2 ë°±í˜„      ê°•ë¦‰
  3 íƒì—°      ìš¸ì‚°
  4 ìˆ˜í˜¸      ëª©í¬
  5 ì›¬ë””      ì„œìš¸

1)splë¬¸ ì‚¬ìš©
declare --ë³€ìˆ˜ ì„ ì–¸ í•  ê²ƒì´ ì—†ìœ¼ë©´ ì§€ì›Œë„ ë¨
	
begin
	insert into customer
	values(5,'ì›¬ë””','ì„œìš¸');
end;

2)ë³€ìˆ˜
declare 
	vno number;
	vname varchar2(10) := 'ìŠ¬ê¸°';
	vaddr varchar2(10) := 'ë¶€ì‚°';
begin
	vno := 6;
	insert into customer
	values(vno,vname,vaddr);
end;

3)code ì…ë ¥ë°›ì•„ì„œ***
declare 
	vno number := '&no'; --&ë‹¤ìŒì— ì•„ë¬´ê±°ë‚˜ ì“°ë©´ ë¨
	vname varchar2(10) := '&name';
	vaddr varchar2(10) := '&addr';
begin
	insert into customer
	values(vno,vname,vaddr);
end;


4)code ì…ë ¥ë°›ì•„ ì‚­ì œ

declare
	vcode varchar2(10):= '&code';
begin
	delete from consumer
	where code = vcode;
end;
/

5)code ì…ë ¥ë°›ì•„ ìˆ˜ì •

ODE                 C_NAME                  C_PRICE C_ADDR
-------------------- -------------------- ---------- --------------------
A05                  ì œë‹ˆ                       2500 ê´‘ì£¼
A01                  ì „ì§€í˜„                     1100 ì„œìš¸
A02                  ê¹€ìˆ˜í˜„                     2100 ë¶€ì‚°
A03                  ì•„ì´ìœ                      3100 ì œì£¼
A04                  íƒœì—°                       3100 ì œì£¼

update consumer
set c_name='ì¡°ì´', c_price=10
where code='A01';

Declare
	vcode varchar2(5):= '&code';
	vc_name varchar2(10):='&c_name';
	vc_price number:='&c_price';
Begin
	update consumer
	set c_name = vc_name ,c_price=vc_price
	where code=vcode;
End;
/

--declare

Begin
	update consumer
	set c_name = '&c_name' ,'&c_price --ë³€ìˆ˜ì„ ì–¸ ì—†ì´ ë°”ë¡œ ì…ë ¥ ë°›ì„ ìˆ˜ ìˆìŒ***
	where code='&code';
End;
/
-------------------------------------------------------------------------------------------

â–¶ifë¬¸ ì‚¬ìš©í•˜ê¸°

if ì¡°ê±´ then
	ì²˜ë¦¬í•  ë¬¸ì¥1;
end if;


if ì¡°ê±´ then
 ì²˜ë¦¬í•  ë¬¸ì¥1;
elsif ì¡°ê±´2 then --else if
 ì²˜ë¦¬í•  ë¬¸ì¥2;
else
 ì²˜ë¦¬í•  ë¬¸ì¥3
end if;


declare
	x number := 2;
	result varchar2(15);
begin
	if x=1 then
	  result := 'one';
	elsif x=2 then
	  result := 'two';
	elsif x=3 then
	   result :='ê·¸ ë°–ì˜ ìˆ˜';
	else
	  result := 'ê·¸ ë°–ì˜ ìˆ˜';
	end if;

	dbms_output.put_line('result:' || result);
end;
/

declare
	x number := '&x';
	result varchar2(15);
begin
	if x=1 then
	  result := 'one';
	elsif x=2 then
	  result := 'two';
	elsif x=3 then
	   result :='ê·¸ ë°–ì˜ ìˆ˜';
	else
	  result := 'ê·¸ ë°–ì˜ ìˆ˜';
	end if;

	dbms_output.put_line('result:' || result);
end;
/
-----------------------------------------------------------

sabun ì…ë ¥ : 3ë²ˆì˜ sabun, name,deptno 
deptno ê°€ 10 : ì¸ì‚¬ë¶€
deptno ê°€ 20 : ê°œë°œë¶€
deptno ê°€ 30 : í™ë³´ë¶€
ê·¸ ë°–ì˜ ìˆ˜ : ì—†ëŠ” ë¶€ì„œ

select sabun, name,deptno
from company
where sabun=3;

sabun, name,deptno, ë¶€ì„œì´ë¦„ë„ ì¶œë ¥


declare
	vsabun number  := '&sabun';
	vname varchar2(12);
	vdept varchar2(10) ;
	vdeptno varchar2(10);
begin
	select sabun, name,deptno
	into vsabun, vname,vdeptno
	from company
	where sabun=vsabun;

	if vdeptno=10 then
	 vdept := 'ì¸ì‚¬ë¶€';
	elsif vdeptno =20 then 
	 vdept := 'ê°œë°œë¶€';
	elsif vdeptno =30 then
	 vdept := 'í™ë³´ë¶€';
	else
	 vdept := 'ì—†ëŠ” ë¶€ì„œ';
	end if;

	dbms_output.put_line(vsabun|| ',' || vname|| ',' ||vdeptno|| ',' || vdept);
end;


-----------------------------------------------------------------
members í…Œì´ë¸” ì´ìš© 
idë¥¼ ì…ë ¥ 6
6 ì œì‹œì¹´ 500

ê¸‰ì—¬ 500ì´ìƒì´ë©´
-ê¸‰ì—¬ì˜ 10%ê°€ ì„¸ê¸ˆ 100/0.1
300
5
ì•„ë‹ˆë©´ 
3

6 ì œì‹œì¹´ 500 50
5 ì„œí˜„ 200 6

--(vid, vname, vsalary) ì•ˆë¨!!!


declare
 vid number := '&id';
 vname varchar2(10);
 vsalary number;
 tax number;

begin

select id, name, salary
into vid, vname, vsalary
from members
where id = vid;

if vsalary>=500 then
 tax:=vsalary*0.1;
elsif vsalary>=300 then
 tax:=vsalary*0.05;
else
 tax:=vsalary*0.03;
end if;

dbms_output.put_line(vid || ',' || vname || ',' || vsalary || ',' || tax); 

end;

ğŸ˜‰ğŸ˜Šâ¤
12,ìš°ê¸°,600,60

PL/SQL ì²˜ë¦¬ê°€ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
3,ìˆ˜ì˜,300,15
