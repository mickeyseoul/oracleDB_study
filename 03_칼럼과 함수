▶alter 컬럼 변경/추가/수정/삭제
모든 alter는 rollback 안됨 자동 커밋 됨

▷add 컬럼 추가
alter table members add(gender varchar2(6) default '여자' check(gender in('남자','여자'))); 
alter table members add(gender varchar2(6) default '여자' check(gender='남자' or gender='여자'));
--default 때문에 작업을 한번만 하면 됨
-- check 제약조건

    SQL> insert into members
      2  values(11,'태연',600,'88-3-3','ttt@gmail.com','010-2222-3333','어자');
    insert into members
    *
    1행에 오류:
    ORA-02290: 체크 제약조건(JSPID.SYS_C007357)이 위배되었습니다 <<<<<<<<체크제약조건

▷modify 컬럼 타입 수정
alter table 테이블명 modify(칼럼 타입);
alter table members modify(hphone varchar2(20));


▷rename column 컬럼 이름 수정
alter table 테이블명 rename column 옛날컬럼명 to 새컬럼명;
alter table members rename column hphone to ph;

▷delete column 칼럼삭제
alter table 테이블명 drop column 삭제될컬럼;
alter table members drop column hphone;
------------------------------------------------------------------------------------------------------------------
▶테이블명 이름 바꾸기
rename 원래테이블 to 새테이블;

rollback; 안됨

    SQL> select * from tab; --테이블 전체 목록 가져오기

    TNAME      TABTYPE         CLUSTERID
    ---------- -------------- ----------
    COMPANY    TABLE
    MEMBERS    TABLE

▶테이블 카피
create table members2 as --members를 전체 카피
select * from members;

create table members3 as
select * from members where id>5;

create table members4 as
select * from members where gender='여자';
----------------------------------------------------------------------------------------------------------------
▶함수(method)
▶그룹함수
:하나 이상의 행을 그룹으로 묶어 연산하여 총합(sum), 평균(avg) 등 하나의 결과로 나타냄 --group by
sum
avg
min
max
count

▷sum
    select sum(salary) as 총합 from members;

              총합
        ----------
           1005800

    select sum(salary) as "급여 총합계" from members; -- 공백이 있는 곳엔 " "***

        급여 총합계
        -----------
            1005800

▷avg
    select avg(salary) as "급여 평균" from members;

         급여 평균
        ----------
        77369.2308

▷min
    select min(salary) as "급여 최소값" from members;

▷max
    select max(salary) as "급여 최대값" from members;

▷count
    select count(id) 갯수 from members; --null은 안 셈

          갯수
    ----------
            13

    select count(*) 갯수 from members; --count(*) 전부 다 null이더라도 count됨 --보통 레코드 갯수 셀때 사용 ***


▶distinct
select distinct(gender) from members; --중복 제거 --

GENDER
-------
여자
남자    
-----------------------------------------------------------------------------------------------------------
▶dual 테이블
dual:함수(계산)을 임시로 실행할 때 사용하는 테이블

    SQL> select * from dual;

    DUMMY
    ----------
    X

    SQL> select 1+1 from dual;

           1+1
    ----------
             2

▶날짜 함수
▷sysdate/systime
1)sysdate
년/월/일 --시/분/초 정보도 들어가 있지만 보이지 않음
    SQL> select sysdate from dual;

    SYSDATE
    --------
    22/06/14 

2)systimestamp
년/월/일 시:분:초
    SQL> select systimestamp from dual;

    SYSTIMESTAMP
    ---------------------------------------------------------------------------
    22/06/14 11:41:37.483000 +09:00

▷to_char/to_date
1)to_char(날짜,format): 날짜 -> 문자열 

    SQL> select to_char(sysdate,'yyyy_mm/dd hh:MI:ss') from dual;

    TO_CHAR(SYSDATE,'YYYY_MM/DDHH:MI:SS')
    --------------------------------------
    2022_06/14 11:47:18

    select to_char(sysdate,'yyyy_mm/dd hh:MI:ss') from dual; --MM XXX
    TO_CHAR(SYSDATE,'YYYY_MM/DDHH:MI:SS')
    --------------------------------------
    2022_06/14 11:06:54
    
나이 뽑아내기   
select name, to_char(sysdate,'yyyy') - to_char(birth,'yyyy') as age from members; 
X select name, to_char(sysdate,'yy') - to_char(birth,'yy') as age from members; --음수가 나옴 -- as 'age'는 임시 칼럼

select name, to_char(sysdate,'yyyy') - to_char(birth,'yyyy') as age from members --
where to_char(sysdate,'yyyy') - to_char(birth,'yyyy')>=40;
Xselect name, to_char(sysdate,'yyyy') - to_char(birth,'yyyy') as age from members  
where age>=40; --age 컬럼은 임시이기 때문에 안됨***
    
생일이 6월인 레코드 조회
select name, to_char(birth,'MM') from members
where to_char(birth,'MM') = '6'; --'06'가능

요일 알아내기
    SQL> select to_char(sysdate,'d') from dual;

    TO
    --
    3

    SQL> select to_char(sysdate,'dy') from dual;

    TO_CHAR(
    --------
    화

    SQL> select to_char(sysdate,'day') from dual;

    TO_CHAR(SYSDATE,'DAY')
    ------------------------
    화요일
    
2) to_date(문자열,format): 문자열 -> 날짜
내 생일 요일 구하기
select to_char(to_date('1993-2-22'),'day') from dual;
    TO_CHAR(TO_DATE('1993-2-
    ------------------------
    월요일
--------------------------------------------------------------------------------------------------------------------
▶숫자 함수
▷mod 나머지 구하기

    SQL> select mod(13,4) from dual; --13을 4로 

    MOD(13,4)
    ----------
             1

생일이 짝수월인 레코드 조회
select name, birth from members
where mod(to_char(birth, 'MM'),2) = 0;
    

▷round/ceil/floor
1) round 반올림 함수
round(n) : 소수점 밑 5이상이면 반올림
round(n,i) : 소수점 기준 i+1번째에서 반올림한 결과를 반환

select round(789.54321), round(0.987), round(0.12345,3) from dual; --네번째 자리까지 보고 세번째 자리까지 출력

ROUND(789.54321) ROUND(0.987) ROUND(0.12345,3)
---------------- ------------ ----------------
             790            1             .123

2) ceil
select ceil(123.1234)from dual; --뭐라도 있으면 무조건 올리기

CEIL(123.1234)
--------------
           124

3) floor
select floor(123.1234)from dual; --무조건 버리기

        SQL> select avg(salary) from members;

        AVG(SALARY)
        -----------
         77369.2308

        SQL> select round(avg(salary),2) from members; --급여 평균 소수아래 2자리까지 조회 (3까지 반올림 반영)

        ROUND(AVG(SALARY),2)
        --------------------
                    77369.23

----------------------------------------------------------------------------------------------------------------
▶문자 함수
▷lower/upper
cf)자바 String tolowerCase() toUppercase()

1)
        SQL> select lower('bANana'), upper('bANaNa') from dual;

        LOWER('BANAN UPPER('BANAN
        ------------ ------------
        banana       BANANA

2)
update members
set email = 'ccc@DAum.net' --SQL문장만 대소문자 구분 안하는 것이지 데이터 값은 구분 함***
where id = 4;

select * from members
where lower(email) like '%daum%'; --찾을 때만 잠시 소문자로 바꿈

select * from members
where lower(email) like lower('%DAum%');

▷length 문자 수/lengthb 바이트 수
1)
        SQL> select length('카페 라떼'), length('cafe latte'), lengthb('카페 라떼'), lengthb('cafe latte') from dual;

        LENGTH('카페라떼') LENGTH('CAFELATTE') LENGTHB('카페라떼') LENGTHB('CAFELATTE')
        ------------------ ------------------- ------------------- --------------------
                         5                  10                  13                   10

2)
select * from members
where name like '___';

select * from members
where length(name) =3;



               
        
